USE rarus_tj_analyzer_2;
go
CREATE TABLE TLOCK(
       EventID    int NOT NULL CONSTRAINT Lock_EventID PRIMARY KEY IDENTITY,
       event_datetime       DATETIME2,
       duration       INT,
       event        VARCHAR(20),
       event_level     INT,
       process         VARCHAR(20),
       processName     VARCHAR(50) NULL,
       clientID     INT NULL,
       applicationName     VARCHAR(100) NULL,
       computerName     VARCHAR(100) NULL,
       connectID     INT NULL,
       SessionID     INT NULL,
       Usr     VARCHAR(100) NULL,
       Regions     VARCHAR(200) NULL,
       Locks     VARCHAR(MAX) NULL,
       WaitConnections    VARCHAR(50) NULL,
       Context     VARCHAR(MAX) NULL)
CREATE TABLE TTIMEOUT(
       EventID    int NOT NULL CONSTRAINT Timeout_EventID PRIMARY KEY IDENTITY,
       event_datetime       DATETIME2,
       event        VARCHAR(20),
       event_level     INT,
       process         VARCHAR(20),
       processName     VARCHAR(50) NULL,
       ClientId     INT NULL,
       applicationName     VARCHAR(100) NULL,
       computerName     VARCHAR(100) NULL,
       ConnectId     INT NULL,
       SessionId     INT NULL,
       Usr     VARCHAR(100) NULL,
       WaitConnections     VARCHAR(50) NULL,
       Context     VARCHAR(MAX) NULL)
CREATE TABLE TDEADLOCK(
         EventID    int NOT NULL CONSTRAINT Deadlock_EventID PRIMARY KEY IDENTITY,
         event_datetime       DATETIME2,
          event        VARCHAR(20),
          event_level     INT,
          process         VARCHAR(20),
          processName     VARCHAR(50) NULL,
          ClientId     INT NULL,
          applicationName     VARCHAR(100) NULL,
          computerName     VARCHAR(100) NULL,
          ConnectId     INT NULL,
          SessionId     INT NULL,
          Usr     VARCHAR(100) NULL,
          deadlock_session_1     INT NULL,
          deadlock_session_2     INT NULL,
          deadlock_region     VARCHAR(200) NULL,
          deadlock_type     VARCHAR(50) NULL,
          deadlock_locks     VARCHAR(MAX) NULL,
          Context       VARCHAR(MAX) NULL)